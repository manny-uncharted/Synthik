version: '3.8'

services:
  web:
    image: datahive-backend
    build:
      context: .
      dockerfile: Dockerfile
    ports:
      - "8000:8000"
    env_file:
      - .env

  inngest:
    image: inngest/inngest:latest
    command: >
      inngest dev
      -u http://web:8000/api/inngest
    ports:
      - "8288:8288"
      - "4317:4317"
    depends_on:
      - web
